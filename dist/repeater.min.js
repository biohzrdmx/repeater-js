(()=>{(()=>{class r{customClasses;customMarkup;constructor(e={},t={}){this.customClasses=e,this.customMarkup=t}registerCustomClass(e,t){this.customClasses[e]=t}registerCustomMarkup(e,t){this.customMarkup[e]=t}classes(e){throw"Method classes must be implemented"}markup(e,t,s){throw"Method markup must be implemented"}}window.Repeater=window.Repeater||{},window.Repeater.AbstractAdapter=r})();(()=>{class r extends window.Repeater.AbstractAdapter{classes(e){switch(e){case"hide":return"d-none";case"row":return"row g-3";case"column":return"col-lg";case"repeater":return"repeater-bootstrap";case"field":return"mb-3";case"button":return"btn btn-primary";case"label":return"mb-1";case"text":case"password":case"date":case"time":case"datetime":case"number":case"textarea":return"form-control";case"color":return"form-control form-control-color";case"range":return"form-range";case"select":return"form-select";default:let t=this.customClasses[e]||null;return t?t():""}}markup(e,t,s){let i=t.getAttributes();switch(e){case"phone":return this.phoneMarkup(t,s,i);case"email":return this.emailMarkup(t,s,i);case"url":return this.urlMarkup(t,s,i);case"checkbox":return this.checkboxMarkup(t,s,i);case"radio":return this.radioMarkup(t,s,i);case"toggle":return this.toggleMarkup(t,s,i);default:let a=this.customMarkup[e]||null;return a?a(t,s,i):null}}phoneMarkup(e,t,s){return`<div class="input-group">
                <span class="input-group-text">${window.Repeater.icon("phone",{class:"text-muted"})}</span>
                <input type="tel" name="${t}" id="${t}_0" ${s} class="form-control">
            </div>`}emailMarkup(e,t,s){return`<div class="input-group">
                <span class="input-group-text">${window.Repeater.icon("email",{class:"text-muted"})}</span>
                <input type="email" name="${t}" id="${t}_0" ${s} class="form-control">
            </div>`}urlMarkup(e,t,s){return`<div class="input-group">
                <span class="input-group-text">${window.Repeater.icon("web",{class:"text-muted"})}</span>
                <input type="url" name="${t}" id="${t}_0" ${s} class="form-control">
            </div>`}toggleMarkup(e,t,s){let i=e.options.details||e.options.label;return`<div class="form-check form-switch">
                <input type="checkbox" name="${t}" id="${t}_0" ${s} class="form-check-input">
                <label class="form-check-label" for="${t}_0">${i}</label>
            </div>`}radioMarkup(e,t){let s=[],i=0;return e.options.options.forEach(a=>{let n,l;a instanceof Object?(n=Object.keys(a)[0],l=Object.values(a)[0]):n=l=a,s.push(`<div class="form-check">
                       <input type="radio" name="${t}[]" id="${t}_${i}" class="form-check-input" value="${n}">
                       <label for="${t}_${i}" class="form-check-label">${l}</label>
                   </div>`),i++}),s.join(`
`)}checkboxMarkup(e,t){let s=[],i=0;return e.options.options.forEach(a=>{let n,l;a instanceof Object?(n=Object.keys(a)[0],l=Object.values(a)[0]):n=l=a,s.push(`<div class="form-check">
                       <input type="checkbox" name="${t}[]" id="${t}_${i}" class="form-check-input" value="${n}">
                       <label for="${t}_${i}" class="form-check-label">${l}</label>
                   </div>`),i++}),s.join(`
`)}}window.Repeater=window.Repeater||{},window.Repeater.BootstrapAdapter=r})();(()=>{class r{item;adapter;options;element;attributes;constructor(e,t,s){this.item=e,this.options=t,this.adapter=s,this.attributes=[]}label(e){let t=this.adapter.classes("label");return`<label for="${e}_0" class="${t}">${this.options.label}</label>`}init(e,t){throw"Method init must be implemented"}refresh(){throw"Method refresh must be implemented"}conditional(e){throw"Method conditional must be implemented"}render(e){throw"Method render must be implemented"}applyTransform(e){let t=e;if(typeof this.options.transform<"u"){switch(this.options.transform.type){case"lowercase":t=e.toLowerCase();break;case"uppercase":t=e.toUpperCase();break;case"titlecase":t=e.replace(/\w\S*/g,s=>s.charAt(0).toUpperCase()+s.substring(1).toLowerCase());break;case"slug":t=this.slug(t);break;default:throw new Error(`Transform "${this.options.transform.type}" is not supported`)}if(typeof this.options.transform.target>"u")return t;{let s=this.item.fields[this.options.transform.target]||null;s&&(this.item.model.updateField(s.options.name,t),s.refresh())}}return null}slug(e){e=e.replace(/^\s+|\s+$/g,""),e=e.toLowerCase();let t="\xE0\xE1\xE4\xE2\xE8\xE9\xEB\xEA\xEC\xED\xEF\xEE\xF2\xF3\xF6\xF4\xF9\xFA\xFC\xFB\xF1\xE7\xB7/_,:;",s="aaaaeeeeiiiioooouuuunc------";for(let i=0,a=t.length;i<a;i++)e=e.replace(new RegExp(t.charAt(i),"g"),s.charAt(i));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),e}getAttributes(){let e=[];return this.attributes.forEach(t=>{if(this.options.hasOwnProperty(t)){let s=this.options[t];typeof s=="boolean"?e.push(t):e.push(`${t}="${s}"`)}}),e.join(" ")}}window.Repeater=window.Repeater||{},window.Repeater.AbstractField=r})();(()=>{class r extends Repeater.AbstractField{input;constructor(e,t,s){super(e,t,s),this.attributes.push("placeholder","maxlength","minlength","pattern","autocomplete","disabled","readonly","required","value")}init(e,t){this.element=e,this.input=this.element.querySelector("input"),this.input.addEventListener("input",s=>{t(this.input.disabled?null:this.input.value)}),this.input.addEventListener("blur",s=>{let i=this.applyTransform(this.input.value);i!==null&&(this.input.value=i,t(this.input.disabled?null:this.input.value))}),typeof this.input.attributes.value<"u"&&this.item.model.updateField(this.options.name,this.input.value)}refresh(){typeof this.input.attributes.value>"u"&&(this.input.value=this.item.model.getField(this.options.name))}conditional(e){this.input.disabled=!e,this.element.classList.toggle(this.adapter.classes("hide"),!e)}render(e){let t=this.adapter.markup("text",this,e);if(t)return t;{let s=this.adapter.classes("text"),i=this.getAttributes();return`<input type="text" name="${e}" id="${e}_0" ${i} class="${s}">`}}}window.Repeater=window.Repeater||{},window.Repeater.TextField=r})();(()=>{class r extends Repeater.TextField{render(e){let t=this.adapter.markup("password",this,e);if(t)return t;{let s=this.adapter.classes("password"),i=this.getAttributes();return`<input type="password" name="${e}" id="${e}_0" ${i} class="${s}">`}}}window.Repeater=window.Repeater||{},window.Repeater.PasswordField=r})();(()=>{class r extends Repeater.TextField{render(e){let t=this.adapter.markup("phone",this,e);if(t)return t;{let s=this.adapter.classes("phone"),i=this.getAttributes();return`<input type="tel" name="${e}" id="${e}_0" ${i} class="${s}">`}}}window.Repeater=window.Repeater||{},window.Repeater.PhoneField=r})();(()=>{class r extends Repeater.TextField{render(e){let t=this.adapter.markup("email",this,e);if(t)return t;{let s=this.adapter.classes("email"),i=this.getAttributes();return`<input type="email" name="${e}" id="${e}_0" ${i} class="${s}">`}}}window.Repeater=window.Repeater||{},window.Repeater.EmailField=r})();(()=>{class r extends Repeater.TextField{render(e){let t=this.adapter.markup("url",this,e);if(t)return t;{let s=this.adapter.classes("url"),i=this.getAttributes();return`<input type="url" name="${e}" id="${e}_0" ${i} class="${s}">`}}}window.Repeater=window.Repeater||{},window.Repeater.UrlField=r})();(()=>{class r extends Repeater.TextField{constructor(e,t,s){super(e,t,s),this.attributes.push("min","max","step")}render(e){let t=this.adapter.markup("date",this,e);if(t)return t;{let s=this.adapter.classes("date"),i=this.getAttributes();return`<input type="date" name="${e}" id="${e}_0" ${i} class="${s}">`}}}window.Repeater=window.Repeater||{},window.Repeater.DateField=r})();(()=>{class r extends Repeater.TextField{constructor(e,t,s){super(e,t,s),this.attributes.push("min","max","step")}render(e){let t=this.adapter.markup("time",this,e);if(t)return t;{let s=this.adapter.classes("time"),i=this.getAttributes();return`<input type="time" name="${e}" id="${e}_0" ${i} class="${s}">`}}}window.Repeater=window.Repeater||{},window.Repeater.TimeField=r})();(()=>{class r extends Repeater.TextField{constructor(e,t,s){super(e,t,s),this.attributes.push("min","max","step")}render(e){let t=this.adapter.markup("datetime",this,e);if(t)return t;{let s=this.adapter.classes("datetime"),i=this.getAttributes();return`<input type="datetime-local" name="${e}" id="${e}_0" ${i} class="${s}">`}}}window.Repeater=window.Repeater||{},window.Repeater.DateTimeField=r})();(()=>{class r extends Repeater.TextField{constructor(e,t,s){super(e,t,s),this.attributes.push("min","max","step")}render(e){let t=this.adapter.markup("number",this,e);if(t)return t;{let s=this.adapter.classes("number"),i=this.getAttributes();return`<input type="number" name="${e}" id="${e}_0" ${i} class="${s}">`}}}window.Repeater=window.Repeater||{},window.Repeater.NumberField=r})();(()=>{class r extends Repeater.TextField{render(e){let t=this.adapter.markup("color",this,e);if(t)return t;{let s=this.adapter.classes("color"),i=this.getAttributes();return`<input type="color" name="${e}" id="${e}_0" ${i} class="${s}">`}}}window.Repeater=window.Repeater||{},window.Repeater.ColorField=r})();(()=>{class r extends Repeater.TextField{constructor(e,t,s){super(e,t,s),this.attributes=["min","max","step","value"]}render(e){let t=this.adapter.markup("range",this,e);if(t)return t;{let s=this.adapter.classes("range"),i=this.getAttributes();return`<input type="range" name="${e}" id="${e}_0" ${i} class="${s}">`}}}window.Repeater=window.Repeater||{},window.Repeater.RangeField=r})();(()=>{class r extends Repeater.TextField{constructor(e,t,s){super(e,t,s),this.attributes.push("checked")}init(e,t){this.element=e,this.input=this.element.querySelector("input"),this.input.addEventListener("input",s=>{t(this.input.checked)}),this.input.checked&&this.item.model.getField(this.options.name)===null&&this.item.model.updateField(this.options.name,!0)}refresh(){this.input.checked=this.item.model.getField(this.options.name,!1)}render(e){let t=this.adapter.markup("toggle",this,e);if(t)return t;{let s=this.adapter.classes("toggle"),i=this.getAttributes(),a=this.options.details||this.options.label;return`<input type="checkbox" name="${e}" id="${e}_0" ${i} class="${s}"><label for="${e}_0">${a}</label>`}}}window.Repeater=window.Repeater||{},window.Repeater.ToggleField=r})();(()=>{class r extends Repeater.AbstractField{textarea;constructor(e,t,s){super(e,t,s),this.attributes.push("placeholder","maxlength","minlength","rows","autocomplete","disabled","readonly","required")}init(e,t){this.element=e,this.textarea=this.element.querySelector("textarea"),this.textarea.addEventListener("input",s=>{t(this.textarea.disabled?null:this.textarea.value)}),this.textarea.addEventListener("blur",s=>{let i=this.applyTransform(this.textarea.value);i!==null&&(this.textarea.value=i,t(this.textarea.disabled?null:this.textarea.value))})}refresh(){this.textarea.value=this.item.model.getField(this.options.name)}conditional(e){this.textarea.disabled=!e,this.element.classList.toggle(this.adapter.classes("hide"),!e)}render(e){let t=this.adapter.markup("textarea",this,e);if(t)return t;{let s=this.adapter.classes("textarea"),i=this.getAttributes();return`<textarea name="${e}" id="${e}_0" ${i} class="${s}"></textarea>`}}}window.Repeater=window.Repeater||{},window.Repeater.TextAreaField=r})();(()=>{class r extends Repeater.AbstractField{select;init(e,t){this.element=e,this.select=this.element.querySelector("select"),this.select.addEventListener("change",s=>{t(this.select.disabled?null:this.select.value)})}refresh(){this.select.value=this.item.model.getField(this.options.name)}conditional(e){this.select.disabled=!e,this.element.classList.toggle(this.adapter.classes("hide"),!e)}render(e){let t=this.adapter.markup("select",this,e);if(t)return t;{let s=this.adapter.classes("select"),i=[];return this.options.options.forEach(a=>{let n,l;a instanceof Object?(n=Object.keys(a)[0],l=Object.values(a)[0]):n=l=a,i.push(`<option value="${n}">${l}</option>`)}),`<select name="${e}" id="${e}_0" class="${s}">${i.join()}</select>`}}}window.Repeater=window.Repeater||{},window.Repeater.SelectField=r})();(()=>{class r extends Repeater.AbstractField{inputs;disabled;constructor(e,t,s){super(e,t,s),this.disabled=!1}init(e,t){this.element=e,this.inputs=this.element.querySelectorAll("input"),this.element.addEventListener("change",s=>{s.stopImmediatePropagation(),t(this.disabled?null:this.getValues())})}refresh(){this.setValue(this.item.model.getField(this.options.name,[]))}conditional(e){this.disabled=!e,this.inputs.forEach(t=>{t.disabled=!e}),this.element.classList.toggle(this.adapter.classes("hide"),!e)}render(e){let t=this.adapter.markup("checkbox",this,e);if(t)return t;{let s=this.adapter.classes("checkbox"),i=[],a=0;return this.options.options.forEach(n=>{let l,d;n instanceof Object?(l=Object.keys(n)[0],d=Object.values(n)[0]):l=d=n,i.push(`<input type="checkbox" name="${e}[]" id="${e}_${a}" class="${s}" value="${l}"><label for="${e}_${a}">${d}</label>`),a++}),i.join(`
`)}}setValue(e){this.inputs instanceof NodeList&&this.inputs.forEach(t=>{e.includes(t.value)&&(t.checked=!0)})}getValues(){let e=[];return this.inputs.forEach(t=>{t.checked&&e.push(t.value)}),e}}window.Repeater=window.Repeater||{},window.Repeater.CheckboxField=r})();(()=>{class r extends Repeater.AbstractField{disabled;constructor(e,t,s){super(e,t,s),this.disabled=!1}init(e,t){this.element=e,this.inputs=this.element.querySelectorAll("input"),this.element.addEventListener("change",s=>{s.stopImmediatePropagation(),t(this.disabled?null:this.getValue(this.inputs))})}refresh(){this.setValue(this.item.model.getField(this.options.name))}conditional(e){this.disabled=!e,this.inputs.forEach(t=>{t.disabled=!e}),this.element.classList.toggle(this.adapter.classes("hide"),!e)}render(e){let t=this.adapter.markup("radio",this,e);if(t)return t;{let s=this.adapter.classes("radio"),i=[],a=0;return this.options.options.forEach(n=>{let l,d;n instanceof Object?(l=Object.keys(n)[0],d=Object.values(n)[0]):l=d=n,i.push(`<input type="radio" name="${e}[]" id="${e}_${a}" class="${s}" value="${l}"><label for="${e}_${a}">${d}</label>`),a++}),i.join(`
`)}}setValue(e){this.inputs.forEach(t=>{t.value===e&&(t.checked=!0)})}getValue(){let e=null;return this.inputs.forEach(t=>{t.checked&&(e=t.value)}),e}}window.Repeater=window.Repeater||{},window.Repeater.RadioField=r})();(()=>{class r extends Repeater.AbstractField{container;disabled;nestedRepeater;constructor(e,t,s){super(e,t,s),this.disabled=!1}init(e,t){this.element=e,this.container=this.element.querySelector(".repeater-nested"),this.nestedRepeater=Repeater.create(this.container,this.options.schema,new Repeater.BootstrapAdapter),this.container.addEventListener("repeater.changed",s=>{t(this.disabled?null:this.nestedRepeater.save(!1))})}refresh(){this.nestedRepeater.load(this.item.model.getField(this.options.name,[]))}conditional(e){this.disabled=!e,this.element.classList.toggle(this.adapter.classes("hide"),!e)}render(e){return'<div class="repeater-nested"></div>'}}window.Repeater=window.Repeater||{},window.Repeater.RepeaterField=r})();(()=>{class r{id;repeater;model;fields;updated;title;conditionals;constructor(e,t,s,i){this.repeater=e,this.id=t,this.model=s,this.fields={},this.updated=i,this.conditionals={},this.title=null}render(e){let t=this.model.getMetadata("collapsed",!1);return`<div id="${this.id}" class="repeater-item ${t?"is-collapsed":""}">
                <div class="item-header">
                    <div class="header-title">
                        <a href="#" data-action="toggle" title="${e.toggle}">${window.Repeater.icon("caret")}</a>
                        <span data-title="${e.item}"></span>
                    </div>
                    <div class="header-actions">
                        <a href="#" data-action="copy" title="${e.copy}">${window.Repeater.icon("copy")}</a>
                        <a href="#" data-action="paste" title="${e.paste}">${window.Repeater.icon("paste")}</a>
                        <a href="#" data-action="moveUp" title="${e.moveUp}">${window.Repeater.icon("up")}</a>
                        <a href="#" data-action="moveDown" title="${e.moveDown}">${window.Repeater.icon("down")}</a>
                        <a href="#" data-action="prepend" title="${e.add}">${window.Repeater.icon("add")}</a>
                        <a href="#" data-action="delete" title="${e.delete}">${window.Repeater.icon("delete")}</a>
                    </div>
                </div>
                <div class="item-fields"></div>
            </div>`}addField(e,t,s="",i=!1){let a=window.Repeater.randomString(16),n=t.render(a),l=t.options.label?t.label(a):null,d=document.createElement("div");if(d.id=a,d.className="field",l!==null&&d.insertAdjacentHTML("beforeend",l),d.insertAdjacentHTML("beforeend",n),e.append(d),this.model.addField(t.options.name,s),i&&(this.title=document.getElementById(this.id).querySelector(".header-title span")),typeof t.options.conditional<"u"){if(this.conditionals[t.options.conditional.field]=this.conditionals[t.options.conditional.field]||[],!["empty","notEmpty","equal","notEqual","matches","contains"].includes(t.options.conditional.type))throw new Error(`Conditional of type "${t.options.conditional.type}" is not supported`);this.conditionals[t.options.conditional.field].push({type:t.options.conditional.type,value:t.options.conditional.value,field:t})}t.init(d,h=>{i&&this.updateTitle(h),this.model.updateField(t.options.name,h),this.updated(t),this.applyConditionals(t,h)}),t.refresh(),i&&this.updateTitle(s),this.fields[t.options.name]=t}applyConditionals(e,t){(this.conditionals[e.options.name]||[]).forEach(i=>{let a=!1;switch(i.type){case"empty":a=t===""||t===0||t===!1;break;case"notEmpty":a=t!==""&&t!==0&&t!==!1;break;case"equal":a=t===i.value;break;case"notEqual":a=t!==i.value;break;case"matches":a=new RegExp(i.value,"i").test(t);break;case"contains":a=t.indexOf(t)>=0;break}i.field.conditional(a)})}created(){Object.entries(this.fields).forEach(([e,t])=>{let s=this.model.getField(e);this.applyConditionals(t,s)})}updateTitle(e){this.title.textContent=e||this.repeater.schema.item||this.title.dataset.title}serialize(){return this.model.serialize()}unserialize(e){this.model.unserialize(e),Object.values(this.fields).forEach(t=>{t.refresh()}),this.created()}}window.Repeater=window.Repeater||{},window.Repeater.Item=r})();(()=>{class r{id;fields;metadata;constructor(e){this.id=e,this.fields={},this.metadata={},this.changed=[]}addField(e,t){this.fields[e]=t}updateField(e,t){this.fields[e]=t}getField(e,t=null){return this.fields[e]??t}setMetadata(e,t){this.metadata[e]=t}getMetadata(e,t=null){return this.metadata[e]??t}serialize(){let e={};return Object.entries(this.metadata).forEach(([t,s])=>{e[`_${t}`]=s}),Object.entries(this.fields).forEach(([t,s])=>{s!==null&&(e[t]=s)}),e}unserialize(e){Object.keys(this.fields).forEach(t=>{this.fields[t]=e[t]??null})}}window.Repeater=window.Repeater||{},window.Repeater.Model=r})();(()=>{class r{strings;container;fields;schema;elements;items;clipboard;constructor(e,t,s,i=null){this.container=e,this.adapter=s,this.strings=i||{add:"Add item",append:"Add item before",copy:"Copy to clipboard",paste:"Paste from clipboard",delete:"Delete item",moveUp:"Move item up",moveDown:"Move item down",toggle:"Toggle item",item:"Item",placeholder:"No items yet, click the button below to add a new one"},this.items=[],this.fields={},this.elements={},this.clipboard=null,this.registerField("text",window.Repeater.TextField),this.registerField("password",window.Repeater.PasswordField),this.registerField("phone",window.Repeater.PhoneField),this.registerField("email",window.Repeater.EmailField),this.registerField("url",window.Repeater.UrlField),this.registerField("date",window.Repeater.DateField),this.registerField("time",window.Repeater.TimeField),this.registerField("datetime",window.Repeater.DateTimeField),this.registerField("number",window.Repeater.NumberField),this.registerField("color",window.Repeater.ColorField),this.registerField("range",window.Repeater.RangeField),this.registerField("toggle",window.Repeater.ToggleField),this.registerField("textarea",window.Repeater.TextAreaField),this.registerField("select",window.Repeater.SelectField),this.registerField("checkbox",window.Repeater.CheckboxField),this.registerField("radio",window.Repeater.RadioField),this.registerField("repeater",window.Repeater.RepeaterField),this.createRepeater(t)}createRepeater(e){this.schema=e;let t=window.Repeater.randomString(16),s=this.adapter.classes("button");this.container.innerHTML=`<div id="${t}" class="repeater">
                <div class="repeater-items" data-placeholder="${this.schema.placeholder||this.strings.placeholder}"></div>
                <div class="repeater-actions">
                    <a class="${s} repeater-action" data-action="append" href="#">${this.schema.button||this.strings.add}</a>
                </div>
            </div>`,this.elements.repeater=document.getElementById(t),this.elements.items=this.elements.repeater.querySelector(".repeater-items"),this.elements.repeater.classList.add(this.adapter.classes("repeater")),this.elements.repeater.addEventListener("click",i=>{let a=i.target.dataset.action||null,n=i.target.closest(".repeater-item");if(a)switch(i.stopImmediatePropagation(),i.preventDefault(),a){case"append":this.append();break;case"prepend":this.prepend(n);break;case"delete":this.delete(n);break;case"moveUp":this.moveUp(n);break;case"moveDown":this.moveDown(n);break;case"toggle":this.toggle(n);break;case"copy":this.copy(n);break;case"paste":this.paste(n);break}})}createItem(e,t={}){let s=window.Repeater.randomString(16),i=new window.Repeater.Model(s),a=new window.Repeater.Item(this,s,i,n=>{let l=new CustomEvent("repeater.changed",{item:a,field:n});this.container.dispatchEvent(l)});i.setMetadata("collapsed",t._collapsed||!1),e(a,n=>{let l=n.querySelector(".item-fields"),d=this.adapter.classes("row"),h=this.adapter.classes("column"),p=null,u=null;this.schema.fields.forEach(c=>{let w=this.fields[c.type]||null;if(w===null)throw new Error(`Unknown field type '${c.type}'`);let b=new w(a,c,this.adapter);if(typeof c.layout<"u"){(p==null||c.layout.newRow)&&(p=document.createElement("div"),p.className=d,l.append(p));let m=document.createElement("div");m.className=c.layout.column?`${h}-${c.layout.column}`:h,p.append(m),u=m}else p&&(p=null),u=l;a.addField(u,b,t[c.name]??null,this.schema.collapsed===c.name)}),a.created()})}registerField(e,t){this.fields[e]=t}append(){this.createItem((e,t)=>{this.elements.items.insertAdjacentHTML("beforeend",e.render(this.strings)),this.items.push(e);let s=document.getElementById(e.id);s.item=e,t(s);let i=new CustomEvent("repeater.changed",{item:e,field:null});this.container.dispatchEvent(i)})}prepend(e){this.createItem((t,s)=>{e.insertAdjacentHTML("beforebegin",t.render(this.strings)),this.items.unshift(t);let i=document.getElementById(t.id);i.item=t,s(i);let a=new CustomEvent("repeater.changed",{item:t,field:null});this.container.dispatchEvent(a)})}delete(e){this.items=this.items.filter(s=>s.id!==e.id),e.remove();let t=new CustomEvent("repeater.changed",{item:null,field:null});this.container.dispatchEvent(t)}moveUp(e){let t=e.previousElementSibling;if(t){t.before(e);let s=this.items.findIndex(i=>i.id===e.id);[this.items[s-1],this.items[s]]=[this.items[s],this.items[s-1]],e.item.updated(null),e.classList.add("is-moving"),setTimeout(()=>{e.classList.remove("is-moving")},200)}}moveDown(e){let t=e.nextElementSibling;if(t){t.after(e);let s=this.items.findIndex(i=>i.id===e.id);[this.items[s],this.items[s+1]]=[this.items[s+1],this.items[s]],e.item.updated(null),e.classList.add("is-moving"),setTimeout(()=>{e.classList.remove("is-moving")},200)}}toggle(e){e.classList.toggle("is-collapsed"),e.item.model.setMetadata("collapsed",e.classList.contains("is-collapsed"));let t=new CustomEvent("repeater.changed",{item:null,field:null});this.container.dispatchEvent(t)}copy(e){this.clipboard=e.item.serialize(),this.elements.repeater.classList.add("has-copy-data")}paste(e){this.clipboard&&(e.item.unserialize(this.clipboard),this.clipboard=null,this.elements.repeater.classList.remove("has-copy-data"))}load(e){e&&(Array.isArray(e)?e:JSON.parse(e)).forEach(s=>{this.createItem((i,a)=>{this.elements.items.insertAdjacentHTML("beforeend",i.render(this.strings)),this.items.push(i);let n=document.getElementById(i.id);n.item=i,a(n)},s)})}save(e=!0){let t=[];return this.items.forEach(s=>{t.push(s.serialize())}),e?JSON.stringify(t):t}}window.Repeater=window.Repeater||{},window.Repeater.create=(o,e,t,s=null)=>new r(o,e,t,s),window.Repeater.randomString=o=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="";if(window.crypto!==void 0){let s=new Uint8Array(o);crypto.getRandomValues(s),s.forEach(i=>{t+=e[i%e.length]})}else for(let s=0;s<o;s++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},window.Repeater.icon=(o,e={})=>{let t=null,s="none";switch(o){case"up":t='<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 15 7-7 7 7"/>';break;case"down":t='<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7"/>';break;case"add":t='<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-7 7V5"/>';break;case"delete":t='<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6"/>';break;case"phone":t='<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.427 14.768 17.2 13.542a1.733 1.733 0 0 0-2.45 0l-.613.613a1.732 1.732 0 0 1-2.45 0l-1.838-1.84a1.735 1.735 0 0 1 0-2.452l.612-.613a1.735 1.735 0 0 0 0-2.452L9.237 5.572a1.6 1.6 0 0 0-2.45 0c-3.223 3.2-1.702 6.896 1.519 10.117 3.22 3.221 6.914 4.745 10.12 1.535a1.601 1.601 0 0 0 0-2.456Z"/>';break;case"email":t='<path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="m3.5 5.5 7.893 6.036a1 1 0 0 0 1.214 0L20.5 5.5M4 19h16a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z"/>';break;case"web":t='<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.213 9.787a3.391 3.391 0 0 0-4.795 0l-3.425 3.426a3.39 3.39 0 0 0 4.795 4.794l.321-.304m-.321-4.49a3.39 3.39 0 0 0 4.795 0l3.424-3.426a3.39 3.39 0 0 0-4.794-4.795l-1.028.961"/>';break;case"copy":t='<path stroke="currentColor" stroke-linejoin="round" stroke-width="2" d="M9 8v3a1 1 0 0 1-1 1H5m11 4h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-7a1 1 0 0 0-1 1v1m4 3v10a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-7.13a1 1 0 0 1 .24-.65L7.7 8.35A1 1 0 0 1 8.46 8H13a1 1 0 0 1 1 1Z"/>';break;case"paste":t='<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 4h3a1 1 0 0 1 1 1v15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h3m0 3h6m-5-4v4h4V3h-4Z"/>';break;case"caret":t='<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 10 4-6 4 6H8Zm8 4-4 6-4-6h8Z"/>';break}return t?(e.width=e.width||24,e.height=e.height||24,`<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" ${Object.keys(e).map(a=>`${a}="${e[a]}"`).join(" ")} fill="${s}" viewBox="0 0 24 24">${t}</svg>`):""}})();})();
//# sourceMappingURL=repeater.min.js.map
